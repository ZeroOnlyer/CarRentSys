<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset="UTF-8">
    <title>”宠物之家“寄存管理系统首页</title>
    <link type="text/css" rel="stylesheet" href="/static/css/style.css">
    <script src="/static/script/jquery-1.7.2.js">
    </script>
    <script>
        $(function() {
            //给购买的按钮绑定单击事件
            $(".addService2Cart").click(function() {
                //获取要购买的宠物服务的id
                var serviceID = $(this).attr("ID");
                //设置请求的url
                var url = "/addService2Cart"
                    //设置请求参数
                var param = {
                        "serviceID": serviceID
                    }
                    //发送Ajax请求
                $.post(url, param, function(res) {
                    //将响应信息设置到span中
                    $("#carMsg").text(res)
                })
            });
        });
    </script>
</head>

<body  background ="https://uploadfile.bizhizu.cn/2015/0519/20150519015233366.jpg.source.jpg" style="background-repeat: no-repeat;background-size: 100% 100%;
background-attachment: fixed;">>

    <div id="header">
      <span class="wel_word" style="color:#398f8a">”宠物之家“</span>
        {{if .IsLogin}}
        <div>
            <span style="color: #000000">欢迎<span class="um_span" style="color: #398f8a;">{{.Name}}</span>使用”宠物之家“寄存管理系统</span>
            <a href="/getCartInFo" style="color: #000000">我的购物车</a>
            <a href="/getMyOrder" style="color: #000000">我的订单</a>
            <a href="/logout" style="color: #000000">注销</a>&nbsp;&nbsp;
            <a href="/main" style="color: #000000">返回</a>{{if .SuperID}}
            <a href="/pages/manager/manager.html "  style="color: #000000">后台管理</a> {{end}}
        </div>
        {{else}}
        <div>
            <a href="/pages/user/login.html"  style="color: #000000">登录</a>
            <a href="/pages/user/regist.html"  style="color: #000000">注册</a> &nbsp;&nbsp;
        </div>
        {{end}}

    </div>

    <div id="main">
        <div id="car">
            <div class="car_cond">
                <form action="/getPageServicesByPrice" method="POST">
                    价格：<input type="text" name="min"> 元 -
                    <input type="text" name="max"> 元 <button>查询</button>
                </form>
            </div>
            <div style="text-align: center">
                <div>
                    <span style="color:red" id="carMsg"></span>
                </div>
            </div>

            {{range .Services}}
            <div class="b_list">
                <div class="img_div">
                    <img class="car_img" alt="" src="{{.ImgPath}}" />
                </div>
                <div class="ccar_info">
                    <div class="car_name">
                        <span class="sp1">服务名:</span>
                        <span class="sp2">{{.Name}}</span>
                    </div>
                    <div class="car_price">
                        <span class="sp1">价格:</span>
                        <span class="sp2">${{.Price}}</span>
                    </div>
                    <div class="car_sales">
                        <span class="sp1">数量:</span>
                        <span class="sp2">{{.Num}}</span>
                    </div>
                    <div class="car_add">
                        {{if .Num}}
                        <button id="{{.ID}}" class="addService2Cart">加入购物车</button> {{else}}
                        <span style="color: red">售罄啦！</span> {{end}}
                    </div>
                </div>
            </div>
            {{end}}
            <br><br><br><br><br><br><br><br><br><br><br><br><br><br>
            <div id="page_nav">
                {{if .IsHasPrev}}
                <a href="/getPageCarsByPrice?min={{.MinPrice}}&max={{.MaxPrice}}">首页</a>
                <a href="/getPageCarsByPrice?pageNow={{.GetPrevPage}}&min={{.MinPrice}}&max={{.MaxPrice}}">上一页</a> {{end}} 当前是第{{.PageNow}}页，共{{.PageSum}}页，共{{.PageFinal}}条记录 {{if .IsHasNext}}
                <a href="/getPageCarsByPrice?pageNow={{.GetNextPage}}&min={{.MinPrice}}&max={{.MaxPrice}}">下一页</a>
                <a href="/getPageCarsByPrice?pageNow={{.PageSum}}&min={{.MinPrice}}&max={{.MaxPrice}}">末页</a> {{end}}到第
                <input value="{{.PageNow}}" name="pn" id="pn_input" />页
                <input type="button" value="确定" id="sub">
                <script>
                    //给确定按钮绑定单击事件
                    $("#sub").click(function() {
                        //获取输入的页码
                        var pageNow = $("#pn_input").val();
                        location = "/getPageCarsByPrice?pageNow=" + pageNow + "&min={{.MinPrice}}&max={{.MaxPrice}}";
                    });
                </script>
            </div>

        </div>
    </div>
</body>

</html>